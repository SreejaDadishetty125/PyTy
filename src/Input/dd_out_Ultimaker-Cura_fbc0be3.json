[
  {
    "project": "Ultimaker/Cura",
    "commit": "fbc0be30ecb6bc5b671788dabd92e099262b1fa3",
    "filename": "plugins/Toolbox/src/CloudSync/CloudPackageChecker.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/Ultimaker-Cura/plugins/Toolbox/src/CloudSync/CloudPackageChecker.py",
    "file_hunks_size": 6,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "plugins/Toolbox/src/CloudSync/CloudPackageChecker.py:118:12 Incompatible attribute type [8]: Attribute `_last_check_packages` declared in class `CloudPackageChecker` has type `List[str]` but is used as type `typing.Set[typing.Any]`.",
    "message": " Attribute `_last_check_packages` declared in class `CloudPackageChecker` has type `List[str]` but is used as type `typing.Set[typing.Any]`.",
    "rule_id": "Incompatible attribute type [8]",
    "warning_line_no": 118,
    "warning_line": "            self._last_check_packages = user_subscribed_packages",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "import json\nfrom typing import List, Dict, Any\nfrom typing import Optional\n",
        "source_code_len": 75,
        "target_code": "import json\nfrom typing import List, Dict, Any, Set\nfrom typing import Optional\n",
        "target_code_len": 80,
        "diff_format": "@@ -4,3 +4,3 @@\n import json\n-from typing import List, Dict, Any\n+from typing import List, Dict, Any, Set\n from typing import Optional\n",
        "source_code_with_indent": "import json\nfrom typing import List, Dict, Any\nfrom typing import Optional\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "import json\nfrom typing import List, Dict, Any, Set\nfrom typing import Optional\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "        self._sdk_version = ApplicationMetadata.CuraSDKVersion\n        self._last_check_packages = []  # type: List[str]\n        \"\"\"Result from a previous check within the same user session. \n        Used to prevent duplicate notifications\"\"\"\n\n",
        "source_code_len": 244,
        "target_code": "        self._sdk_version = ApplicationMetadata.CuraSDKVersion\n        self._last_notified_packages = set()  # type: Set[str]\n        \"\"\"Packages for which a notification has been shown. No need to bother the user twice fo equal content\"\"\"\n\n",
        "target_code_len": 241,
        "diff_format": "@@ -38,5 +38,4 @@\n         self._sdk_version = ApplicationMetadata.CuraSDKVersion\n-        self._last_check_packages = []  # type: List[str]\n-        \"\"\"Result from a previous check within the same user session. \n-        Used to prevent duplicate notifications\"\"\"\n+        self._last_notified_packages = set()  # type: Set[str]\n+        \"\"\"Packages for which a notification has been shown. No need to bother the user twice fo equal content\"\"\"\n \n",
        "source_code_with_indent": "        self._sdk_version = ApplicationMetadata.CuraSDKVersion\n        self._last_check_packages = []  # type: List[str]\n        \"\"\"Result from a previous check within the same user session. \n        Used to prevent duplicate notifications\"\"\"\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "        self._sdk_version = ApplicationMetadata.CuraSDKVersion\n        self._last_notified_packages = set()  # type: Set[str]\n        \"\"\"Packages for which a notification has been shown. No need to bother the user twice fo equal content\"\"\"\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "        # reset session\n        self._last_check_packages = []\n        self._getPackagesIfLoggedIn()\n",
        "source_code_len": 101,
        "target_code": "        # reset session\n        self._last_notified_packages = set()\n        self._getPackagesIfLoggedIn()\n",
        "target_code_len": 107,
        "diff_format": "@@ -54,3 +53,3 @@\n         # reset session\n-        self._last_check_packages = []\n+        self._last_notified_packages = set()\n         self._getPackagesIfLoggedIn()\n",
        "source_code_with_indent": "        # reset session\n        <IND>self._last_check_packages = []\n        self._getPackagesIfLoggedIn()\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "        # reset session\n        <IND>self._last_notified_packages = set()\n        self._getPackagesIfLoggedIn()\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "\n        if user_subscribed_packages == self._last_check_packages:\n            # nothing new here\n            return\n",
        "source_code_len": 117,
        "target_code": "\n        if user_subscribed_packages == self._last_notified_packages:\n            # already notified user about these\n            return\n",
        "target_code_len": 137,
        "diff_format": "@@ -98,4 +97,4 @@\n \n-        if user_subscribed_packages == self._last_check_packages:\n-            # nothing new here\n+        if user_subscribed_packages == self._last_notified_packages:\n+            # already notified user about these\n             return\n",
        "source_code_with_indent": "\n        if user_subscribed_packages == self._last_check_packages:\n            # nothing new here\n            <IND>return\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "\n        if user_subscribed_packages == self._last_notified_packages:\n            # already notified user about these\n            <IND>return\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "            self._showSyncMessage()\n            self._last_check_packages = user_subscribed_packages\n\n",
        "source_code_len": 102,
        "target_code": "            self._showSyncMessage()\n            self._last_notified_packages = user_subscribed_packages\n\n",
        "target_code_len": 105,
        "diff_format": "@@ -117,3 +116,3 @@\n             self._showSyncMessage()\n-            self._last_check_packages = user_subscribed_packages\n+            self._last_notified_packages = user_subscribed_packages\n \n",
        "source_code_with_indent": "            self._showSyncMessage()\n            self._last_check_packages = user_subscribed_packages\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "            self._showSyncMessage()\n            self._last_notified_packages = user_subscribed_packages\n\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  }
]