[
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:15:39 Incompatible parameter type [6]: Expected `snuba.snapshots.postgres_snapshot.Xid` for 1st parameter `xmin` to call `TransactionData.__init__` but got `int`.",
    "message": " Expected `snuba.snapshots.postgres_snapshot.Xid` for 1st parameter `xmin` to call `TransactionData.__init__` but got `int`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 15,
    "warning_line": "    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:15:47 Incompatible parameter type [6]: Expected `snuba.snapshots.postgres_snapshot.Xid` for 2nd parameter `xmax` to call `TransactionData.__init__` but got `int`.",
    "message": " Expected `snuba.snapshots.postgres_snapshot.Xid` for 2nd parameter `xmax` to call `TransactionData.__init__` but got `int`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 15,
    "warning_line": "    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:27:33 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 27,
    "warning_line": "                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:39:24 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 39,
    "warning_line": "                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:52:24 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 52,
    "warning_line": "                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:56:31 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotAbort.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotAbort.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 56,
    "warning_line": "                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:66:24 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 66,
    "warning_line": "                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:71:35 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotLoaded.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotLoaded.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 71,
    "warning_line": "                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:83:24 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 83,
    "warning_line": "                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:89:24 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 89,
    "warning_line": "                        id=\"234asd\",",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:95:31 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotAbort.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotAbort.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 95,
    "warning_line": "                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:98:24 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 98,
    "warning_line": "                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:111:24 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 111,
    "warning_line": "                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:116:35 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotLoaded.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotLoaded.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 116,
    "warning_line": "                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:121:24 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 121,
    "warning_line": "                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:126:35 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotLoaded.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotLoaded.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 126,
    "warning_line": "                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  },
  {
    "project": "getsentry/snuba",
    "commit": "4065f6341b492d10ba9a08769698a66ad1677497",
    "filename": "tests/stateful_consumer/test_recovery_state.py",
    "filename_after_commit": "/home/chowyi/TypeAnnotation_Study/GitHub/getsentry-snuba/tests/stateful_consumer/test_recovery_state.py",
    "file_hunks_size": 20,
    "min_patch_found": true,
    "single_hunk": false,
    "fit_TFix": false,
    "delete_only_patch": false,
    "has_suppression_all_hunks": false,
    "full_warning_msg": "tests/stateful_consumer/test_recovery_state.py:131:24 Incompatible parameter type [6]: Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "message": " Expected `snuba.snapshots.SnapshotId` for 1st parameter `id` to call `SnapshotInit.__init__` but got `str`.",
    "rule_id": "Incompatible parameter type [6]",
    "warning_line_no": 131,
    "warning_line": "                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]",
    "min_patch": [
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_len": 303,
        "target_code": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_len": 345,
        "diff_format": "@@ -3,7 +5,9 @@\n from snuba.consumers.strict_consumer import CommitDecision\n+from snuba.snapshots import SnapshotId\n+from snuba.snapshots.postgres_snapshot import Xid\n from snuba.stateful_consumer import ConsumerStateCompletionEvent\n-from snuba.stateful_consumer.states.bootstrap import RecoveryState\n from snuba.stateful_consumer.control_protocol import (\n+    ControlMessage,\n+    SnapshotAbort,\n     SnapshotInit,\n-    SnapshotAbort,\n     SnapshotLoaded,\n",
        "source_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\nfrom snuba.stateful_consumer.control_protocol import (\n    SnapshotInit,\n    SnapshotAbort,\n    SnapshotLoaded,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "from snuba.consumers.strict_consumer import CommitDecision\nfrom snuba.snapshots import SnapshotId\nfrom snuba.snapshots.postgres_snapshot import Xid\nfrom snuba.stateful_consumer import ConsumerStateCompletionEvent\nfrom snuba.stateful_consumer.control_protocol import (\n    ControlMessage,\n    SnapshotAbort,\n    SnapshotInit,\n    SnapshotLoaded,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": ")\n\n",
        "source_code_len": 3,
        "target_code": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_len": 70,
        "diff_format": "@@ -11,2 +15,3 @@\n )\n+from snuba.stateful_consumer.states.bootstrap import RecoveryState\n \n",
        "source_code_with_indent": ")\n\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": ")\nfrom snuba.stateful_consumer.states.bootstrap import RecoveryState\n\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_len": 112,
        "target_code": "class TestRecoveryState:\n    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_len": 160,
        "diff_format": "@@ -14,3 +19,4 @@\n class TestRecoveryState:\n-    transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n+    transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n+    snapshot_id = SnapshotId(\"123asd\")\n     test_data = [\n",
        "source_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=1, xmax=2, xip_list=[],)\n    test_data = [\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "class TestRecoveryState:\n    <IND>transaction_data = TransactionData(xmin=Xid(1), xmax=Xid(2), xip_list=[])\n    snapshot_id = SnapshotId(\"123asd\")\n    test_data = [\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_len": 202,
        "diff_format": "@@ -26,3 +32,5 @@\n                 (\n-                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n+                    SnapshotInit(\n+                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n+                    ),\n                     CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent": "                (\n                    SnapshotInit(id=\"123asd\", product=\"snuba\", tables=[\"some_table\"]),\n                    CommitDecision.COMMIT_THIS,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotInit(\n                        id=snapshot_id, product=\"snuba\", tables=[\"some_table\"]\n                    ),\n                    CommitDecision.COMMIT_THIS,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -38,3 +46,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -51,3 +61,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_len": 108,
        "target_code": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_len": 111,
        "diff_format": "@@ -55,3 +67,3 @@\n                 ),\n-                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n+                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n             ],\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"123asd\"), CommitDecision.COMMIT_THIS),\n            ],\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=snapshot_id), CommitDecision.COMMIT_THIS),\n            ],\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -65,3 +77,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 155,
        "diff_format": "@@ -70,3 +84,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -82,3 +96,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_len": 118,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_len": 130,
        "diff_format": "@@ -88,3 +104,3 @@\n                     SnapshotInit(\n-                        id=\"234asd\",\n+                        id=SnapshotId(\"234asd\"),\n                         product=\"someoneelse\",\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\",\n                        product=\"someoneelse\",\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"someoneelse\",\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 257,
        "target_code": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 330,
        "diff_format": "@@ -94,6 +110,8 @@\n                 ),\n-                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n+                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                 (\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                ),\n                (SnapshotAbort(id=\"234asd\"), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                ),\n                (SnapshotAbort(id=SnapshotId(\"234asd\")), CommitDecision.DO_NOT_COMMIT),\n                (\n                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 196,
        "diff_format": "@@ -110,3 +128,5 @@\n                     SnapshotInit(\n-                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=snapshot_id,\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"123asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=snapshot_id,\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 156,
        "diff_format": "@@ -115,3 +135,3 @@\n                 (\n-                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"123asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(id=snapshot_id, transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -120,3 +140,5 @@\n                     SnapshotInit(\n-                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"234asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"234asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"234asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": false,
        "inside_window": false,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_len": 153,
        "target_code": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_len": 211,
        "diff_format": "@@ -125,3 +147,5 @@\n                 (\n-                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n+                    SnapshotLoaded(\n+                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n+                    ),\n                     CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent": "                (\n                    SnapshotLoaded(id=\"234asd\", transaction_info=transaction_data,),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                (\n                    SnapshotLoaded(\n                        id=SnapshotId(\"234asd\"), transaction_info=transaction_data,\n                    ),\n                    CommitDecision.DO_NOT_COMMIT,\n",
        "target_code_with_indent_exact_match": true
      },
      {
        "hunk_fit_TFix": true,
        "inside_window": true,
        "delete_only": false,
        "has_suppression": false,
        "source_code": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_len": 144,
        "target_code": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_len": 205,
        "diff_format": "@@ -130,3 +154,5 @@\n                     SnapshotInit(\n-                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n+                        id=SnapshotId(\"345asd\"),\n+                        product=\"snuba\",\n+                        tables=[\"sentry_groupedmessage\"],\n                     ),\n",
        "source_code_with_indent": "                    SnapshotInit(\n                        id=\"345asd\", product=\"snuba\", tables=[\"sentry_groupedmessage\"]\n                    ),\n",
        "source_code_with_indent_exact_match": true,
        "target_code_with_indent": "                    SnapshotInit(\n                        id=SnapshotId(\"345asd\"),\n                        product=\"snuba\",\n                        tables=[\"sentry_groupedmessage\"],\n                    ),\n",
        "target_code_with_indent_exact_match": true
      }
    ]
  }
]